(this.webpackJsonptheia=this.webpackJsonptheia||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(10),o=n.n(c),s=(n(17),n(2)),u=n.n(s),i=n(3),l=n(12),f=n(4),p=(n.p,n(19),[{label:"Yieldwatch (BSC)",method:function(e){return j.apply(this,arguments)}},{label:"Filfox (FIL)",method:function(e){return h.apply(this,arguments)}},{label:"Kraken",value:O},{label:"Binance",value:O}]);function d(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=(n=p.find((function(e){return e.label==t.type})))){e.next=4;break}throw console.log("ERROR FETCH FROM UNDEFINED ",t),"Error undefined source";case 4:return e.next=6,n.method(t.key);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(i.a)(u.a.mark((function e(t){var n,r,a,c,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("YieldWatch fetching"),n=["beefy","pancake","auto","bunny"].join(","),e.next=5,fetch("https://www.yieldwatch.net/api/all/".concat(t,"?platforms=").concat(n));case 5:return r=e.sent,e.next=8,r.json();case 8:if("0"!=(a=e.sent).status){e.next=11;break}throw"Invalid request (maybe invalid address?";case 11:return c=a.result,s={bunny:[o=function(e){return c[e].vaults.vaults.map((function(t){var n=t.priceInUSDDepositToken,r=t.priceInUSDRewardToken,a=n*t.currentTokens+r*t.pendingRewards;return{platform:e,token:t.depositToken.toLowerCase(),usd:a}}))},function(e){return c[e].staking.vaults.map((function(t){var n=t.priceInUSDDepositToken*(t.depositedTokens+t.pendingRewards);return{platform:e,token:t.depositToken,usd:n}}))}],Autofarm:[o]},e.abrupt("return",Object.entries(s).map((function(e){var t=Object(f.a)(e,2),n=t[0];return t[1].map((function(e){return e(n)})).flat()})).flat());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(i.a)(u.a.mark((function e(t){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://filfox.info/api/v1/address/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).statusCode){e.next=8;break}throw"Invalid FIL request";case 8:return a=r.balance/Math.pow(10,18),e.next=11,m("filecoin");case 11:return c=e.sent,e.abrupt("return",{plat:"FIL",token:"FIL",usd:a*c});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coingecko.com/api/v3/coins/".concat(t,"?tickers=true&community_data=false&developer_data=false&sparkline=false"),{headers:{accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.market_data.current_price.usd);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("NOT IMPLEMENTED YET"),e.abrupt("return",[]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(11),y=n(0),E=function(e,t){return e.type==t.type&&e.key==t.key},N=function(e,t){return{type:e,key:t}},k=N("","");function S(e){var t=e.entry,n=e.onSubmit,a=e.onDelete,c=function(){return void 0==t||""==t.type?(console.log("DEFAULT VALUE EMPTY ",t," => replace by ",p[0].label),p[0].label):t.type},o=Object(r.useState)(c()),s=Object(f.a)(o,2),u=s[0],i=s[1],l=Object(r.useState)(t.key),d=Object(f.a)(l,2),b=d[0],j=d[1],h=function(){return N(u,b)};console.log("NEW RENDER : type",u,c(),t);var m=E(t,k)?"Add Source":"Update";return Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("form",{className:"form-inline well",role:"form",onSubmit:function(e){e.preventDefault();var r=h();console.log("OLD ENTRY ",t," => NEW ENTRY (type",u,") : ",r),n(t,r),i(""),j("")},children:Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"col-md-1",children:"Source"}),Object(y.jsx)("select",{className:"form-control col-md-3",value:u,defaultValue:p[0].label,onChange:function(e){return i(e.target.value)},children:p.map((function(e){return Object(y.jsx)("option",{value:e.label,children:e.label.toUpperCase()})}))}),Object(y.jsx)("input",{value:b,onChange:function(e){return j(e.target.value)},type:"text",size:"50",className:"form-control col-md-5 col-md-offset-4",placeholder:"Enter API / Public key"}),Object(y.jsx)("button",{className:"btn btn-primary col-md-2",children:m}),Object(y.jsx)("button",{type:"button",onClick:function(){return a(h())},className:"close col-md-1","aria-label":"Delete",children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})})}var w="sources";function T(e){var t=e.newConfigCallback,n=Object(r.useState)([]),a=Object(f.a)(n,2),c=a[0],o=a[1];Object(r.useEffect)((function(){var e=localStorage.getItem(w),t=JSON.parse(e);t&&(console.log("LOADED entries from storage ",t),o(t))}),[]),Object(r.useEffect)((function(){var e=JSON.stringify(c);localStorage.setItem(w,e),t(c),console.log("SAVED entries to storage",c)}),[c]);var s=function(){var e=Object(l.a)(c);o(e)},u=function(e,t){var n=c.findIndex((function(t){return E(e,t)}));-1!=n?c[n]=t:(c.push(t),console.log("INSERTING new entry at ",n," => ",c)),s()},i=function(e){console.log("DELETE ENTRY ",e," ON ",c);var t=c.findIndex((function(t){return E(e,t)}));-1!=t&&(c.splice(t,1),console.log("DELETE ENTRY NEW STATE",c),s())};return console.log("ENTRIES SIZE: ",c.length," ==> ",c),Object(y.jsxs)("div",{className:"Config",children:[c.map((function(e){return Object(y.jsx)(S,{entry:e,onSubmit:u,onDelete:i},JSON.stringify(e))})),Object(y.jsx)(S,{entry:k,onSubmit:u,onDelete:i},JSON.stringify(k))]})}var I="results";function D(e){var t=e.results,n=t.reduce((function(e,t){return e+t.usd}),0);return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"row",children:["You got ",n.toFixed(2)," dollars in there !"]}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)(g.CSVLink,{data:t,children:"Download CSV results"}),";"]})]})}var C=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=localStorage.getItem(I),t=JSON.parse(e);t&&a(t)}),[]),Object(r.useEffect)((function(){var e=JSON.stringify(n);localStorage.setItem(I,e)}),[n]),Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)("div",{className:"col-md-8 mx-auto",children:[Object(y.jsx)("header",{className:"App-header",children:Object(y.jsx)("p",{children:"Crypto Summary"})}),Object(y.jsx)(T,{newConfigCallback:function(e){console.log("NEW ENTRIES SETUP: ",e),function(){var t=Object(i.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e,c=d,Promise.all(n.map(c));case 2:r=t.sent.flat(),console.log("NEW RESULTS",r),a(r);case 5:case"end":return t.stop()}var n,c}),t)})));return function(e){return t.apply(this,arguments)}}()(e)}}),Object(y.jsx)(D,{results:n})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};n(27);o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(C,{})}),document.getElementById("root")),R()}},[[28,1,2]]]);
//# sourceMappingURL=main.c251c805.chunk.js.map